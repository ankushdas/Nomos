
#test success

type ping  = +{ping : |*> pong}
type pong  = &{pong : <*| ping}

proc p1 : (x : ping) |- (sink : 1) =
  case x
  ( ping => get x {1}; x.pong; pay x {1}; sink <- p1 <- x
  )