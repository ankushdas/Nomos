type steady = p+{sun{0.83333333} : 1, rain{0.16666667} : 1}

proc asset steady_state : ($a : steady) |{*}- ($b : steady) =
{
  pcase $a (
    sun => flip {0.9} (
      HH => $b..sun ;
            wait $a ;
            close $b
    | TT => $b..rain ;
            wait $a ;
            close $b
    )
  | rain => flip {0.5} (
      HH => $b..sun ;
            wait $a ;
            close $b
    | TT => $b..rain ;
            wait $a ;
            close $b
  )
  )
}