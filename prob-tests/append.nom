type A = 1

type plistA1 = p+{cons{0.8} : A * plistA1, nil{0.2} : 1}
type plistA2 = p+{cons{1.0} : A * plistA2, nil{0.0} : 1}

proc asset append : ($l1 : plistA1), ($l2 : plistA2) |{*}- ($l : plistA2) =
{
  pcase $l1 (
    cons => $l..cons ;
            $x <- recv $l1 ;
            send $l $x ;
            $l <- append <- $l1 $l2
  | nil => wait $l1 ;
           $l <- $l2
  )
}