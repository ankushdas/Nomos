type lossy_channel = int -> p+{ack{0.8} : 1,
                               dropped{0.2} : lossy_channel}

proc asset communicator : . |{*}- ($c : lossy_channel) =
{
  m = recv $c ;
  flip {0.8} (
    HH => $c..ack ;
          close $c
  | TT => $c..dropped ;
          $c <- communicator <-
  )
}