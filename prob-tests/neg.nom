type pcoin = p+{head{1} : 1, tail{1} : 1}

proc asset fair_coin : . |- ($p : pcoin) =
{
  flip {1,1} (
    HH => $p..head ;
          close $p
  | TT => $p..tail ;
          close $p
  )
}